[debug] [2025-12-03T14:16:58.164Z] ----------------------------------------------------------------------
[debug] [2025-12-03T14:16:58.167Z] Command:       /opt/homebrew/Cellar/node/24.9.0_1/bin/node /opt/homebrew/bin/firebase emulators:start --debug
[debug] [2025-12-03T14:16:58.168Z] CLI Version:   14.26.0
[debug] [2025-12-03T14:16:58.168Z] Platform:      darwin
[debug] [2025-12-03T14:16:58.168Z] Node Version:  v24.9.0
[debug] [2025-12-03T14:16:58.168Z] Time:          Wed Dec 03 2025 19:46:58 GMT+0530 (India Standard Time)
[debug] [2025-12-03T14:16:58.175Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-03T14:16:58.263Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-03T14:16:58.264Z] > authorizing via signed-in user (athiralek@gmail.com)
[info] i  emulators: Starting emulators: functions, hosting, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, hosting, extensions"}}
[debug] [2025-12-03T14:16:58.265Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:16:58.265Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:16:58.266Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-12-03T14:16:58.266Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/elderly-support
[debug] [2025-12-03T14:17:00.439Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com 403
[debug] [2025-12-03T14:17:00.439Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-12-03T14:17:00.440Z] Unable to check that https://cloudresourcemanager.googleapis.com is enabled on elderly-support. Calls to it will fail if it is not enabled
[debug] [2025-12-03T14:17:00.440Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:00.440Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:00.440Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support [none]
[debug] [2025-12-03T14:17:02.580Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support 403
[debug] [2025-12-03T14:17:02.581Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[error] ⬢  extensions: Unable to look up project number for elderly-support.
 If this is a real project, ensure that you are logged in and have access to it.
 If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.
 Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly. {"metadata":{"emulator":{"name":"extensions"},"message":"Unable to look up project number for elderly-support.\n If this is a real project, ensure that you are logged in and have access to it.\n If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.\n Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly."}}
[debug] [2025-12-03T14:17:03.078Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:17:03.078Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:17:03.078Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-12-03T14:17:03.080Z] Emulator locator file path: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[debug] [2025-12-03T14:17:03.080Z] [hub] writing locator at /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[debug] [2025-12-03T14:17:03.081Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2025-12-03T14:17:03.424Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:17:03.424Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:17:03.424Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:17:03.424Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-12-03T14:17:03.434Z] defaultcredentials: writing to file /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json
[debug] [2025-12-03T14:17:03.434Z] Setting GAC to /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json"}}
[debug] [2025-12-03T14:17:03.434Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:03.434Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:03.434Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig [none]
[debug] [2025-12-03T14:17:05.490Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig 403
[debug] [2025-12-03T14:17:05.490Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:17:05.491Z] Failed to get Admin SDK config for elderly-support, falling back to cache Failed to get Admin SDK for Firebase project elderly-support. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project elderly-support. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig had HTTP Error: 403, The caller does not have permission","status":403},"status":500}
[warn] ⚠  functions: Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect. {"metadata":{"emulator":{"name":"functions"},"message":"Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect."}}
[debug] [2025-12-03T14:17:05.500Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:05.500Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:05.500Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites 
[debug] [2025-12-03T14:17:06.784Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites 403
[debug] [2025-12-03T14:17:06.784Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites {"error":{"code":403,"message":"Permission 'firebasehosting.sites.get' denied on resource 'projects/elderly-support' (or it may not exist)","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:17:06.784Z] Failed to list hosting sites
[debug] Request to https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites had HTTP Error: 403, Permission 'firebasehosting.sites.get' denied on resource 'projects/elderly-support' (or it may not exist)
[debug] [2025-12-03T14:17:06.784Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:06.785Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:06.785Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config [none]
[debug] [2025-12-03T14:17:07.290Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config 403
[debug] [2025-12-03T14:17:07.291Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:17:07.291Z] fetchWebSetup error: FirebaseError: Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config had HTTP Error: 403, The caller does not have permission
[warn] ⚠  hosting: Authentication error when trying to fetch your current web app configuration, have you run firebase login? 
[warn] ⚠  hosting: Could not fetch web app configuration and there is no cached configuration on this machine. Check your internet connection and make sure you are authenticated. To continue, you must call firebase.initializeApp({...}) in your code before using Firebase. 
[debug] [2025-12-03T14:17:07.310Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:07.311Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:17:07.311Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support [none]
[debug] [2025-12-03T14:17:07.979Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support 403
[debug] [2025-12-03T14:17:07.980Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:17:07.980Z] Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support had HTTP Error: 403, The caller does not have permission
[debug] [2025-12-03T14:17:07.982Z] Specified "public" directory "frontend/build" does not exist; Deploy to Hosting site "elderly-support" may fail or be empty.
[info] i  hosting[elderly-support]: Serving hosting files from: frontend/build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mfrontend/build\u001b[22m"}}
[info] ✔  hosting[elderly-support]: Local server: http://127.0.0.1:5000 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5000\u001b[22m\u001b[24m"}}
[debug] [2025-12-03T14:17:08.135Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "/Users/i329189/Documents/elderly-support/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/i329189/Documents/elderly-support/functions\" for Cloud Functions..."}}
[debug] [2025-12-03T14:17:08.137Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-12-03T14:17:09.145Z] > [functions] package.json contents: {
  "name": "elderly-support-functions",
  "version": "1.0.0",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "start": "firebase emulators:start --only functions,hosting"
  },
  "dependencies": {
    "firebase-admin": "^11.10.0",
    "firebase-functions": "^4.4.0",
    "express": "^4.18.2",
    "node-fetch": "^3.3.2",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5",
    "@google/generative-ai": "^0.6.0"
  }
}
[debug] [2025-12-03T14:17:09.145Z] Building nodejs source
[debug] [2025-12-03T14:17:09.146Z] Failed to find version of module node: reached end of search path /Users/i329189/Documents/elderly-support/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: You are using a version of firebase-functions SDK (4.9.0) that does not have support for the newest Firebase Extensions features. Please update firebase-functions SDK to >=5.1.0 to use them correctly 
[debug] [2025-12-03T14:17:09.149Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-03T14:17:09.152Z] Found firebase-functions binary at '/Users/i329189/Documents/elderly-support/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8789

[debug] [2025-12-03T14:17:09.365Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2025-12-03T14:17:12.377Z] [work-queue] {"queuedWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:17:12.377Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:17:12.377Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:17:12.377Z"],"workRunningCount":1}
[debug] [2025-12-03T14:17:12.379Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/elderly-support/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/elderly-support/us-central1/api)."}}
[debug] [2025-12-03T14:17:13.386Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────┬────────────────┬──────────────────────────────────┐
│ Emulator   │ Host:Port      │ View in Emulator UI              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Functions  │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Hosting    │ 127.0.0.1:5000 │ n/a                              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Extensions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-12-03T14:18:06.609Z] [work-queue] {"queuedWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:18:06.609Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:18:06.609Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:18:06.609Z"],"workRunningCount":1}
[debug] [2025-12-03T14:18:06.609Z] Accepted request POST /elderly-support/us-central1/api/triageAgent --> us-central1-api
[debug] [2025-12-03T14:18:06.610Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-12-03T14:18:06.610Z] [functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-12-03T14:18:06.613Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-12-03T14:18:06.613Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-12-03T14:18:07.051Z] [runtime-status] [24516] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-12-03T14:18:07.051Z] [runtime-status] [24516] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:18:07.051Z] [runtime-status] [24516] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-12-03T14:18:07.051Z] [runtime-status] [24516] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:18:07.142Z] [runtime-status] [24516] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-12-03T14:18:07.142Z] [runtime-status] [24516] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2025-12-03T14:18:07.142Z] [runtime-status] [24516] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:18:07.143Z] [runtime-status] [24516] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-12-03T14:18:07.143Z] [runtime-status] [24516] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:18:07.144Z] [runtime-status] [24516] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-12-03T14:18:07.185Z] [runtime-status] [24516] initializeApp(DEFAULT) {"storageBucket":"elderly-support.appspot.com","databaseURL":"https://elderly-support.firebaseio.com","projectId":"elderly-support"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] initializeApp(DEFAULT) {\"storageBucket\":\"elderly-support.appspot.com\",\"databaseURL\":\"https://elderly-support.firebaseio.com\",\"projectId\":\"elderly-support\"}"}}
[debug] [2025-12-03T14:18:07.197Z] [runtime-status] [24516] Functions runtime initialized. {"cwd":"/Users/i329189/Documents/elderly-support/functions","node_version":"24.9.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Functions runtime initialized. {\"cwd\":\"/Users/i329189/Documents/elderly-support/functions\",\"node_version\":\"24.9.0\"}"}}
[debug] [2025-12-03T14:18:07.197Z] [runtime-status] [24516] Listening to port: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/fire_emu_7ff5d88cad1f2d31.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24516] Listening to port: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/fire_emu_7ff5d88cad1f2d31.sock"}}
[debug] [2025-12-03T14:18:07.224Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: IDLE"}}
[debug] [2025-12-03T14:18:07.224Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-12-03T14:18:07.224Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: BUSY"}}
[info] >  TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods. {"user":"TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods."}}
[info] >      at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19) {"user":"    at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22) {"user":"    at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)"}}
[info] >      at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:18:20) {"user":"    at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:18:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:18:20)"}}
[debug] [2025-12-03T14:18:09.434Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2209.925625ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2209.925625ms"}}
[debug] [2025-12-03T14:18:09.434Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: IDLE"}}
[debug] [2025-12-03T14:18:09.434Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-12-03T14:18:09.434Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-12-03T14:18:09.435Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:19:29.549Z] File /Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js changed, reloading triggers"}}
[debug] [2025-12-03T14:19:30.551Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-12-03T14:19:32.012Z] > [functions] package.json contents: {
  "name": "elderly-support-functions",
  "version": "1.0.0",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "start": "firebase emulators:start --only functions,hosting"
  },
  "dependencies": {
    "firebase-admin": "^11.10.0",
    "firebase-functions": "^4.4.0",
    "express": "^4.18.2",
    "node-fetch": "^3.3.2",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5",
    "@google/generative-ai": "^0.6.0"
  }
}
[debug] [2025-12-03T14:19:32.012Z] Building nodejs source
[debug] [2025-12-03T14:19:32.012Z] Failed to find version of module node: reached end of search path /Users/i329189/Documents/elderly-support/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: You are using a version of firebase-functions SDK (4.9.0) that does not have support for the newest Firebase Extensions features. Please update firebase-functions SDK to >=5.1.0 to use them correctly 
[debug] [2025-12-03T14:19:32.014Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-03T14:19:32.015Z] Found firebase-functions binary at '/Users/i329189/Documents/elderly-support/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8848

[debug] [2025-12-03T14:19:32.242Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-12-03T14:19:36.261Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-12-03T14:19:36.262Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: FINISHING"}}
[debug] [2025-12-03T14:19:36.273Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: exited"}}
[debug] [2025-12-03T14:19:36.274Z] [worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ae7fd2e0-bf8d-4bcb-953b-ef11ba6a3014]: FINISHED"}}
[debug] [2025-12-03T14:19:41.148Z] Received signal SIGINT (Ctrl-C) 1
[info]  
[info] i  emulators: Received SIGINT (Ctrl-C) for the first time. Starting a clean shutdown. 
[info] i  emulators: Please wait for a clean shutdown or send the SIGINT (Ctrl-C) signal again to stop right now. 
[info] i  emulators: Shutting down emulators. {"metadata":{"emulator":{"name":"hub"},"message":"Shutting down emulators."}}
[info] i  ui: Stopping Emulator UI {"metadata":{"emulator":{"name":"ui"},"message":"Stopping Emulator UI"}}
[info] i  extensions: Stopping Extensions Emulator {"metadata":{"emulator":{"name":"extensions"},"message":"Stopping Extensions Emulator"}}
[debug] [2025-12-03T14:19:41.151Z] [Extensions] Stopping Extensions emulator, this is a noop.
[info] i  functions: Stopping Functions Emulator {"metadata":{"emulator":{"name":"functions"},"message":"Stopping Functions Emulator"}}
[info] i  hosting: Stopping Hosting Emulator {"metadata":{"emulator":{"name":"hosting"},"message":"Stopping Hosting Emulator"}}
[info] i  eventarc: Stopping Eventarc Emulator {"metadata":{"emulator":{"name":"eventarc"},"message":"Stopping Eventarc Emulator"}}
[info] i  tasks: Stopping Cloud Tasks Emulator {"metadata":{"emulator":{"name":"tasks"},"message":"Stopping Cloud Tasks Emulator"}}
[info] i  hub: Stopping emulator hub {"metadata":{"emulator":{"name":"hub"},"message":"Stopping emulator hub"}}
[debug] [2025-12-03T14:19:41.153Z] Emulator locator file path: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[info] i  logging: Stopping Logging Emulator {"metadata":{"emulator":{"name":"logging"},"message":"Stopping Logging Emulator"}}
[debug] [2025-12-03T14:19:41.156Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[debug] [2025-12-03T14:20:05.114Z] ----------------------------------------------------------------------
[debug] [2025-12-03T14:20:05.115Z] Command:       /opt/homebrew/Cellar/node/24.9.0_1/bin/node /opt/homebrew/bin/firebase emulators:start --debug
[debug] [2025-12-03T14:20:05.116Z] CLI Version:   14.26.0
[debug] [2025-12-03T14:20:05.116Z] Platform:      darwin
[debug] [2025-12-03T14:20:05.116Z] Node Version:  v24.9.0
[debug] [2025-12-03T14:20:05.116Z] Time:          Wed Dec 03 2025 19:50:05 GMT+0530 (India Standard Time)
[debug] [2025-12-03T14:20:05.116Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-03T14:20:05.180Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-03T14:20:05.181Z] > authorizing via signed-in user (athiralek@gmail.com)
[info] i  emulators: Starting emulators: functions, hosting, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, hosting, extensions"}}
[debug] [2025-12-03T14:20:05.182Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:05.182Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:05.183Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-12-03T14:20:05.183Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/elderly-support
[debug] [2025-12-03T14:20:08.125Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com 403
[debug] [2025-12-03T14:20:08.126Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/elderly-support/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-12-03T14:20:08.126Z] Unable to check that https://cloudresourcemanager.googleapis.com is enabled on elderly-support. Calls to it will fail if it is not enabled
[debug] [2025-12-03T14:20:08.126Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:08.126Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:08.127Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support [none]
[debug] [2025-12-03T14:20:09.383Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support 403
[debug] [2025-12-03T14:20:09.384Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/elderly-support {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[error] ⬢  extensions: Unable to look up project number for elderly-support.
 If this is a real project, ensure that you are logged in and have access to it.
 If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.
 Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly. {"metadata":{"emulator":{"name":"extensions"},"message":"Unable to look up project number for elderly-support.\n If this is a real project, ensure that you are logged in and have access to it.\n If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.\n Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly."}}
[debug] [2025-12-03T14:20:09.874Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:20:09.874Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:20:09.874Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-12-03T14:20:09.876Z] Emulator locator file path: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[debug] [2025-12-03T14:20:09.876Z] [hub] writing locator at /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[debug] [2025-12-03T14:20:09.877Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2025-12-03T14:20:10.219Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:20:10.219Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:20:10.219Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-12-03T14:20:10.219Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-12-03T14:20:10.223Z] defaultcredentials: writing to file /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json
[debug] [2025-12-03T14:20:10.223Z] Setting GAC to /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/i329189/.config/firebase/athiralek_gmail_com_application_default_credentials.json"}}
[debug] [2025-12-03T14:20:10.224Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:10.224Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:10.224Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig [none]
[debug] [2025-12-03T14:20:11.196Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig 403
[debug] [2025-12-03T14:20:11.196Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:20:11.196Z] Failed to get Admin SDK config for elderly-support, falling back to cache Failed to get Admin SDK for Firebase project elderly-support. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project elderly-support. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support/adminSdkConfig had HTTP Error: 403, The caller does not have permission","status":403},"status":500}
[warn] ⚠  functions: Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect. {"metadata":{"emulator":{"name":"functions"},"message":"Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect."}}
[debug] [2025-12-03T14:20:11.201Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:11.202Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:11.202Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites 
[debug] [2025-12-03T14:20:14.206Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites 403
[debug] [2025-12-03T14:20:14.206Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites {"error":{"code":403,"message":"Permission 'firebasehosting.sites.get' denied on resource 'projects/elderly-support' (or it may not exist)","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:20:14.207Z] Failed to list hosting sites
[debug] Request to https://firebasehosting.googleapis.com/v1beta1/projects/elderly-support/sites had HTTP Error: 403, Permission 'firebasehosting.sites.get' denied on resource 'projects/elderly-support' (or it may not exist)
[debug] [2025-12-03T14:20:14.207Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:14.207Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:14.207Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config [none]
[debug] [2025-12-03T14:20:14.689Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config 403
[debug] [2025-12-03T14:20:14.690Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:20:14.690Z] fetchWebSetup error: FirebaseError: Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support/webApps/-/config had HTTP Error: 403, The caller does not have permission
[warn] ⚠  hosting: Authentication error when trying to fetch your current web app configuration, have you run firebase login? 
[warn] ⚠  hosting: Could not fetch web app configuration and there is no cached configuration on this machine. Check your internet connection and make sure you are authenticated. To continue, you must call firebase.initializeApp({...}) in your code before using Firebase. 
[debug] [2025-12-03T14:20:14.692Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:14.692Z] Checked if tokens are valid: true, expires at: 1764774387757
[debug] [2025-12-03T14:20:14.693Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support [none]
[debug] [2025-12-03T14:20:15.384Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support 403
[debug] [2025-12-03T14:20:15.384Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/elderly-support {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-12-03T14:20:15.384Z] Request to https://firebase.googleapis.com/v1beta1/projects/elderly-support had HTTP Error: 403, The caller does not have permission
[debug] [2025-12-03T14:20:15.386Z] Specified "public" directory "frontend/build" does not exist; Deploy to Hosting site "elderly-support" may fail or be empty.
[info] i  hosting[elderly-support]: Serving hosting files from: frontend/build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mfrontend/build\u001b[22m"}}
[info] ✔  hosting[elderly-support]: Local server: http://127.0.0.1:5000 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5000\u001b[22m\u001b[24m"}}
[debug] [2025-12-03T14:20:15.481Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "/Users/i329189/Documents/elderly-support/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/i329189/Documents/elderly-support/functions\" for Cloud Functions..."}}
[debug] [2025-12-03T14:20:15.483Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-12-03T14:20:16.322Z] > [functions] package.json contents: {
  "name": "elderly-support-functions",
  "version": "1.0.0",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "start": "firebase emulators:start --only functions,hosting"
  },
  "dependencies": {
    "@google/generative-ai": "^0.6.0",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "firebase-admin": "^11.10.0",
    "firebase-functions": "^4.4.0",
    "node-fetch": "^3.3.2"
  }
}
[debug] [2025-12-03T14:20:16.323Z] Building nodejs source
[debug] [2025-12-03T14:20:16.323Z] Failed to find version of module node: reached end of search path /Users/i329189/Documents/elderly-support/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: You are using a version of firebase-functions SDK (4.9.0) that does not have support for the newest Firebase Extensions features. Please update firebase-functions SDK to >=5.1.0 to use them correctly 
[debug] [2025-12-03T14:20:16.328Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-03T14:20:16.331Z] Found firebase-functions binary at '/Users/i329189/Documents/elderly-support/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8137

[debug] [2025-12-03T14:20:16.529Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/elderly-support/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/elderly-support/us-central1/api)."}}
[debug] [2025-12-03T14:20:20.553Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────┬────────────────┬──────────────────────────────────┐
│ Emulator   │ Host:Port      │ View in Emulator UI              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Functions  │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Hosting    │ 127.0.0.1:5000 │ n/a                              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Extensions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-12-03T14:20:23.951Z] [work-queue] {"queuedWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:20:23.951Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:20:23.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:20:23.951Z"],"workRunningCount":1}
[debug] [2025-12-03T14:20:23.952Z] Accepted request POST /elderly-support/us-central1/api/triageAgent --> us-central1-api
[debug] [2025-12-03T14:20:23.952Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-12-03T14:20:23.952Z] [functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-12-03T14:20:23.956Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-12-03T14:20:23.956Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-12-03T14:20:24.351Z] [runtime-status] [24853] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-12-03T14:20:24.351Z] [runtime-status] [24853] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:20:24.351Z] [runtime-status] [24853] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-12-03T14:20:24.351Z] [runtime-status] [24853] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:20:24.434Z] [runtime-status] [24853] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-12-03T14:20:24.434Z] [runtime-status] [24853] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2025-12-03T14:20:24.434Z] [runtime-status] [24853] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:20:24.434Z] [runtime-status] [24853] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-12-03T14:20:24.435Z] [runtime-status] [24853] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-12-03T14:20:24.435Z] [runtime-status] [24853] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/i329189/Documents/elderly-support/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-12-03T14:20:24.475Z] [runtime-status] [24853] initializeApp(DEFAULT) {"storageBucket":"elderly-support.appspot.com","databaseURL":"https://elderly-support.firebaseio.com","projectId":"elderly-support"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] initializeApp(DEFAULT) {\"storageBucket\":\"elderly-support.appspot.com\",\"databaseURL\":\"https://elderly-support.firebaseio.com\",\"projectId\":\"elderly-support\"}"}}
[debug] [2025-12-03T14:20:24.486Z] [runtime-status] [24853] Functions runtime initialized. {"cwd":"/Users/i329189/Documents/elderly-support/functions","node_version":"24.9.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Functions runtime initialized. {\"cwd\":\"/Users/i329189/Documents/elderly-support/functions\",\"node_version\":\"24.9.0\"}"}}
[debug] [2025-12-03T14:20:24.486Z] [runtime-status] [24853] Listening to port: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/fire_emu_4494ebf7baddb7c3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [24853] Listening to port: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/fire_emu_4494ebf7baddb7c3.sock"}}
[debug] [2025-12-03T14:20:24.567Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE"}}
[debug] [2025-12-03T14:20:24.568Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-12-03T14:20:24.568Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY"}}
[info] >  TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods. {"user":"TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods."}}
[info] >      at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19) {"user":"    at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22) {"user":"    at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)"}}
[info] >      at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20) {"user":"    at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20)"}}
[debug] [2025-12-03T14:20:25.399Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 831.501459ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 831.501459ms"}}
[debug] [2025-12-03T14:20:25.399Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE"}}
[debug] [2025-12-03T14:20:25.400Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-12-03T14:20:25.400Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-12-03T14:20:25.400Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:20:59.277Z] [work-queue] {"queuedWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:20:59.277Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:20:59.277Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:20:59.277Z"],"workRunningCount":1}
[debug] [2025-12-03T14:20:59.278Z] Accepted request GET /elderly-support/us-central1/api/triageAgent --> us-central1-api
[debug] [2025-12-03T14:20:59.278Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-12-03T14:20:59.279Z] [functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent"}}
[debug] [2025-12-03T14:20:59.279Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-12-03T14:20:59.279Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY"}}
[debug] [2025-12-03T14:20:59.284Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 4.577667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 4.577667ms"}}
[debug] [2025-12-03T14:20:59.284Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE"}}
[debug] [2025-12-03T14:20:59.284Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-12-03T14:20:59.284Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-12-03T14:20:59.284Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:21:50.752Z] [work-queue] {"queuedWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:21:50.752Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:21:50.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/elderly-support/us-central1/api/triageAgent-2025-12-03T14:21:50.752Z"],"workRunningCount":1}
[debug] [2025-12-03T14:21:50.752Z] Accepted request POST /elderly-support/us-central1/api/triageAgent --> us-central1-api
[debug] [2025-12-03T14:21:50.753Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-12-03T14:21:50.753Z] [functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/elderly-support/us-central1/api/triageAgent, mapping to path=/triageAgent"}}
[debug] [2025-12-03T14:21:50.753Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-12-03T14:21:50.753Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: BUSY"}}
[info] >  TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods. {"user":"TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TriageAgent Error: GoogleGenerativeAIError: [404 Not Found] models/gemini-1.5-flash is not found for API version v1, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods."}}
[info] >      at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19) {"user":"    at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at _makeRequestInternal (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:303:19)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22) {"user":"    at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async generateContent (/Users/i329189/Documents/elderly-support/functions/node_modules/@google/generative-ai/dist/index.js:692:22)"}}
[info] >      at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20) {"user":"    at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async module.exports (/Users/i329189/Documents/elderly-support/functions/agents/triageAgent.js:23:20)"}}
[debug] [2025-12-03T14:21:51.792Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1039.063417ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1039.063417ms"}}
[debug] [2025-12-03T14:21:51.792Z] [worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eed53934-d43d-4fbc-9939-052670e15fb6]: IDLE"}}
[debug] [2025-12-03T14:21:51.792Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-12-03T14:21:51.792Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-12-03T14:21:51.792Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-12-03T14:22:32.834Z] Received signal SIGINT (Ctrl-C) 1
[info]  
[info] i  emulators: Received SIGINT (Ctrl-C) for the first time. Starting a clean shutdown. 
[info] i  emulators: Please wait for a clean shutdown or send the SIGINT (Ctrl-C) signal again to stop right now. 
[info] i  emulators: Shutting down emulators. {"metadata":{"emulator":{"name":"hub"},"message":"Shutting down emulators."}}
[info] i  ui: Stopping Emulator UI {"metadata":{"emulator":{"name":"ui"},"message":"Stopping Emulator UI"}}
[info] i  extensions: Stopping Extensions Emulator {"metadata":{"emulator":{"name":"extensions"},"message":"Stopping Extensions Emulator"}}
[debug] [2025-12-03T14:22:32.836Z] [Extensions] Stopping Extensions emulator, this is a noop.
[info] i  functions: Stopping Functions Emulator {"metadata":{"emulator":{"name":"functions"},"message":"Stopping Functions Emulator"}}
[info] i  hosting: Stopping Hosting Emulator {"metadata":{"emulator":{"name":"hosting"},"message":"Stopping Hosting Emulator"}}
[info] i  eventarc: Stopping Eventarc Emulator {"metadata":{"emulator":{"name":"eventarc"},"message":"Stopping Eventarc Emulator"}}
[info] i  tasks: Stopping Cloud Tasks Emulator {"metadata":{"emulator":{"name":"tasks"},"message":"Stopping Cloud Tasks Emulator"}}
[info] i  hub: Stopping emulator hub {"metadata":{"emulator":{"name":"hub"},"message":"Stopping emulator hub"}}
[debug] [2025-12-03T14:22:32.838Z] Emulator locator file path: /var/folders/xx/gn4v67pj6nbcfsnh6p64r4tw0000gn/T/hub-elderly-support.json
[info] i  logging: Stopping Logging Emulator {"metadata":{"emulator":{"name":"logging"},"message":"Stopping Logging Emulator"}}
[debug] [2025-12-03T14:22:32.840Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
